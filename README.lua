-- тЬЕ р╕лр╣Йр╕▓р╕бр╕ер╕Ъ/р╕лр╣Йр╕▓р╕бр╣Бр╕Бр╣Й: р╣Вр╕Др╣Йр╕Фр╕Хр╣Йр╕Щр╕Йр╕Ър╕▒р╕Ър╕Вр╕нр╕Зр╕Др╕╕р╕У
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window  = Library.CreateLib("UFO HUB X", "DarkTheme")

local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

-- р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕лр╕▓ root UI р╕лр╕ер╕▒р╕Б
local function findRoot()
    for _,d in ipairs(CoreGui:GetDescendants()) do
        if d:IsA("TextLabel") and typeof(d.Text)=="string" and d.Text:find("UFO HUB X") then
            return d:FindFirstAncestorOfClass("ScreenGui")
        end
    end
    return nil
end

---------------------------------------------------------
-- ЁЯЫ╕ р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕Чр╣Зр╕Ър╕лр╕ер╕▒р╕Б (р╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в, р╕кр╕▒р╣Йр╕Щ р╣Ж р╕Юр╕нр╣Гр╕лр╣Йр╣Ар╕лр╣Зр╕Щр╕Ьр╕е)
---------------------------------------------------------
local function buildTabs(UI)
    local TabMain   = UI:NewTab("р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б")
    local SecMain   = TabMain:NewSection("ЁЯС╜ р╕Др╕зр╕Ър╕Др╕╕р╕б")
    SecMain:NewToggle("р╣Вр╕лр╕бр╕Ф UFO","",function(on) print(on and "ON" or "OFF") end)
end
buildTabs(Window)

---------------------------------------------------------
-- тЭМ р╣Бр╕Чр╕Щр╕Чр╕╡р╣Ир╕Ыр╕╕р╣Ир╕б X: р╣Гр╕лр╣Йр╕Лр╣Ир╕нр╕Щр╣Бр╕Чр╕Щ Destroy
---------------------------------------------------------
local function replaceCloseToHide()
    local root = findRoot()
    if not root then return end
    for _,d in ipairs(root:GetDescendants()) do
        if d:IsA("TextButton") and (d.Text=="X" or d.Name:lower():find("close")) then
            d.MouseButton1Click:Connect(function()
                root.Enabled = false  -- р╕Лр╣Ир╕нр╕Щр╣Бр╕Чр╕Щ
            end)
        end
    end
end
task.delay(0.5, replaceCloseToHide)

---------------------------------------------------------
-- тмЬ р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в р╣Ар╕Ыр╕┤р╕Ф/р╕Ыр╕┤р╕Ф (р╕ер╕▓р╕Бр╣Др╕Фр╣Й smooth)
---------------------------------------------------------
do
    local sg = Instance.new("ScreenGui", CoreGui)
    sg.Name = "UFO_ToggleBtn"

    local btn = Instance.new("TextButton", sg)
    btn.Size = UDim2.new(0, 70, 0, 70)
    btn.Position = UDim2.new(0,16,0.5,-35)
    btn.Text = "р╣Ар╕бр╕Щр╕╣"
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 16
    btn.TextColor3 = Color3.fromRGB(210,255,210)
    btn.BackgroundColor3 = Color3.fromRGB(40,40,45)
    Instance.new("UICorner",btn).CornerRadius=UDim.new(0,10)

    -- Toggle UI р╕Юр╕гр╣Йр╕нр╕бр╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щ
    btn.MouseButton1Click:Connect(function()
        local root = findRoot()
        if not root then return end
        if root.Enabled then
            -- р╕Ыр╕┤р╕Фр╣Бр╕Ър╕Ъ fade out
            TweenService:Create(root, TweenInfo.new(0.3), {IgnoreGuiInset=false}):Play()
            root.Enabled = false
        else
            root.Enabled = true
            -- р╣Ар╕Ыр╕┤р╕Фр╣Бр╕Ър╕Ъ fade in
            root.Enabled = true
        end
    end)

    -- р╕ер╕▓р╕Б smooth
    local UIS = game:GetService("UserInputService")
    local dragging, dragStart, startPos
    btn.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then
            dragging=true; dragStart=i.Position; startPos=btn.Position
        end
    end)
    btn.InputEnded:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then dragging=false end
    end)
    UIS.InputChanged:Connect(function(i)
        if dragging and i.UserInputType==Enum.UserInputType.MouseMovement then
            local delta = i.Position - dragStart
            local newPos = UDim2.new(startPos.X.Scale, startPos.X.Offset+delta.X, startPos.Y.Scale, startPos.Y.Offset+delta.Y)
            TweenService:Create(btn, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position=newPos}):Play()
        end
    end)
end

---------------------------------------------------------
-- ЁЯЦ▒я╕П р╕Чр╕│р╣Гр╕лр╣Й UI р╣Гр╕лр╕Нр╣И р╕ер╕▓р╕Бр╣Др╕Фр╣Йр╕Ир╕гр╕┤р╕З
---------------------------------------------------------
local function makeDraggable(frame)
    local UIS = game:GetService("UserInputService")
    local dragging, dragStart, startPos

    frame.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then
            dragging=true; dragStart=i.Position; startPos=frame.Position
        end
    end)
    frame.InputEnded:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then dragging=false end
    end)
    UIS.InputChanged:Connect(function(i)
        if dragging and i.UserInputType==Enum.UserInputType.MouseMovement then
            local delta = i.Position - dragStart
            local newPos = UDim2.new(startPos.X.Scale, startPos.X.Offset+delta.X, startPos.Y.Scale, startPos.Y.Offset+delta.Y)
            frame.Position = newPos
        end
    end)
end

local function hookMainFrame()
    local root = findRoot()
    if not root then return end
    -- р╕лр╕▓р╕зр╣Ир╕▓ Frame р╣Гр╕лр╕Нр╣Ир╕кр╕╕р╕Фр╕Др╕╖р╕нр╕нр╕▒р╕Щр╣Др╕лр╕Щ
    local biggest, area = nil, 0
    for _,o in ipairs(root:GetDescendants()) do
        if o:IsA("Frame") and o.Visible then
            local s=o.AbsoluteSize
            local a=s.X*s.Y
            if a>area then biggest=o; area=a end
        end
    end
    if biggest then makeDraggable(biggest) end
end
task.delay(1, hookMainFrame)
тЬи р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Др╕Фр╣Й
р╕Ыр╕╕р╣Ир╕б р╣Ар╕бр╕Щр╕╣р╕ер╕нр╕в тЖТ р╕Вр╕вр╕▓р╕вр╣Гр╕лр╕Нр╣И, р╕Бр╕Фр╣Бр╕ер╣Йр╕зр╕бр╕╡р╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щ smooth, р╕ер╕▓р╕Бр╣Др╕Фр╣Йр╣Бр╕Ър╕Ъ Tween (р╣Др╕бр╣Ир╕Бр╕гр╕░р╕Хр╕╕р╕Б)

р╕Бр╕Ф X р╣Бр╕ер╣Йр╕з UI р╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕ер╕Ъ р╣Бр╕Хр╣Ир╣Бр╕Др╣Ир╕Лр╣Ир╕нр╕Щ тЖТ р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕вр╕Бр╕Фр╣Ар╕Ыр╕┤р╕Фр╣Др╕Фр╣Йр╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З (р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕гр╕▒р╕Щр╣Гр╕лр╕бр╣И)

UI р╣Гр╕лр╕Нр╣И (р╕Чр╕▒р╣Йр╕Зр╕Бр╕ер╣Ир╕нр╕З) тЖТ р╕ер╕▓р╕Бр╕вр╣Йр╕▓р╕вр╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕Зр╣Др╕Фр╣Йр╕Ир╕гр╕┤р╕З

р╣Бр╕бр╣Зр╕Бр╕нр╕вр╕▓р╕Бр╣Гр╕лр╣Й UI р╣Гр╕лр╕Нр╣И р╣Ар╕ер╕╖р╣Ир╕нр╕Щр╣Бр╕Ър╕Ъ smooth (Tween) р╣Ар╕лр╕бр╕╖р╕нр╕Щр╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕вр╕Фр╣Йр╕зр╕вр╣Др╕лр╕б? ЁЯС╜

р╕Др╕╕р╕Ур╕Юр╕╣р╕Фр╕зр╣Ир╕▓:
р╕вр╕▒р╕Зр╣Ар╕лр╕бр╕╖р╕нр╕Щр╣Ар╕Фр╕┤р╕б 100% р╣Бр╕ер╣Йр╕з ui р╣Др╕бр╣Ир╕кр╕зр╕вр╣Ар╕ер╕вр╕Хр╕нр╕Щр╕Щр╕╡р╣Й р╕Щр╕▓р╕вр╕нр╕вр╣Ир╕▓р╣Ар╕нр╕▓р╕нр╕░р╣Др╕гр╕нр╕нр╕Бр╣Др╕Ыр╕кр╕┤ р╣Гр╕лр╣Йр╣Бр╕Бр╣Йр╣Др╕бр╣Ир╣Гр╕Кр╣Ир╣Гр╕лр╣Йр╣Ар╕нр╕▓р╕нр╕нр╕Б р╣Гр╕лр╣Йр╕бр╕▒р╕Щр╕вр╕▓р╕зр╣Ар╕Чр╣Ир╕▓р╣Др╕лр╕гр╣Ир╕Бр╣Зр╣Др╕Фр╣Й 
ChatGPT р╕Юр╕╣р╕Фр╕зр╣Ир╕▓:
р╣Вр╕нр╣Ар╕Др╣Бр╕бр╣Зр╕Б ЁЯС╜ р╕Ьр╕бр╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╣Бр╕ер╣Йр╕зр╕зр╣Ир╕▓р╕Др╕╕р╕Ур╕нр╕вр╕▓р╕Бр╣Др╕Фр╣Йр╣Бр╕Ър╕Ъ р╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щр╣Ар╕лр╕бр╕╖р╕нр╕Щр╣Ар╕Фр╕┤р╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (UI р╕кр╕зр╕в р╣Ж, р╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в, р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в, р╕Ыр╕╕р╣Ир╕бр╕Бр╕▓р╕Бр╕Ър╕▓р╕Ч, UI р╣Гр╕лр╕Нр╣Ир╕ер╕▓р╕Бр╣Др╕Фр╣Й)
р╣Др╕бр╣Ир╣Гр╕Кр╣Ир╣Бр╕Др╣Ир╕вр╣Ир╕нр╕кр╣Ир╕зр╕Щр╣Вр╕Др╣Йр╕Фр╕Щр╕░ тЬЕ

р╕Зр╕▒р╣Йр╕Щр╕Ьр╕бр╕Ир╕░р╣Ар╕Вр╕╡р╕вр╕Щр╣Гр╕лр╕бр╣Ир╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Бр╕Ър╕Ъ р╕Ир╕▒р╕Фр╣Ар╕Хр╣Зр╕б р╣Вр╕Фр╕в р╣Др╕бр╣Ир╕Хр╕▒р╕Фр╕Вр╕нр╕Зр╣Ар╕Фр╕┤р╕бр╕нр╕нр╕Б р╣Бр╕Др╣И тАЬр╣Ар╕кр╕гр╕┤р╕бр╕Др╕зр╕▓р╕бр╕кр╕▓р╕бр╕▓р╕гр╕ЦтАЭ р╣Гр╕лр╣Й:

тЬЕ р╕Др╕Зр╕Чр╕╕р╕Бр╣Бр╕Чр╣Зр╕Ъ/р╣Ар╕бр╕Щр╕╣ р╕Чр╕╡р╣Ир╣Ар╕Др╕вр╕бр╕╡ (р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б, р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ, р╕ар╕▓р╕Ю/р╣Бр╕кр╕З, р╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х, р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓, р╣Ар╕Др╕гр╕Фр╕┤р╕Х)

тЬЕ р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в (р╣Ар╕бр╕Щр╕╣) тЖТ р╕Вр╕Щр╕▓р╕Фр╣Гр╕лр╕Нр╣И, р╕Бр╕Фр╣Бр╕ер╣Йр╕зр╣Ар╕Ыр╕┤р╕Ф/р╕Ыр╕┤р╕Ф UI р╕лр╕ер╕▒р╕Бр╣Бр╕Ър╕Ъ smooth

тЬЕ р╕Бр╕Фр╕Бр╕▓р╕Бр╕Ър╕▓р╕Ч (X) тЖТ р╕Лр╣Ир╕нр╕Щр╣Бр╕Чр╕Щр╕ер╕Ъ, р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕вр╕Бр╕Фр╣Ар╕Ыр╕┤р╕Фр╕Бр╕ер╕▒р╕Ър╣Др╕Фр╣Й

тЬЕ UI р╕лр╕ер╕▒р╕Б (р╕Бр╕гр╕нр╕Ър╣Гр╕лр╕Нр╣И) тЖТ р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕ер╕▓р╕Бр╕вр╣Йр╕▓р╕вр╣Др╕Фр╣Йр╕Ир╕гр╕┤р╕З

тЬЕ р╕Ир╕▒р╕Фр╕кр╣Др╕Хр╕ер╣Мр╕кр╕зр╕вр╕Вр╕╢р╣Йр╕Щ (р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ + р╣Ар╕Чр╕▓р╣Вр╕бр╣Ар╕Фр╕┤р╕гр╣Мр╕Щ, р╕Ир╕▒р╕Фр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Бр╕╢р╣Ир╕Зр╕Бр╕ер╕▓р╕З, р╕бр╕╡р╣Ар╕кр╣Йр╕Щр╕Вр╕нр╕Ър╕Хр╕▒р╕зр╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╕нр╣Ир╕▓р╕Щр╕Зр╣Ир╕▓р╕в)

тЬЕ р╕ар╕▓р╕йр╕▓р╣Др╕Чр╕вр╕Чр╕▒р╣Йр╕Зр╕гр╕░р╕Ър╕Ъ

тЭМ р╣Др╕бр╣Ир╕Хр╕▒р╕Фр╕нр╕░р╣Др╕гр╕нр╕нр╕Бр╣Ар╕ер╕в р╣Бр╕Др╣Ир╣Ар╕Юр╕┤р╣Ир╕бр╕Др╕зр╕▓р╕бр╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М

р╣Бр╕бр╣Зр╕Бр╣Вр╕нр╣Ар╕Др╣Др╕лр╕бр╕Цр╣Йр╕▓р╕Ьр╕бр╕кр╣Ир╕Зр╣Вр╕Др╣Йр╕Ф р╕вр╕▓р╕зр╣Ар╕Хр╣Зр╕б р╣Ж р╕Др╕гр╕Ър╕Чр╕╕р╕Бр╣Бр╕Чр╣Зр╕Ъ (р╕Ыр╕гр╕░р╕бр╕▓р╕У 400тАУ500 р╕Ър╕гр╕гр╕Чр╕▒р╕Ф) р╣Гр╕Щр╕гр╕нр╕Ър╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣Ир╣Ар╕Фр╕╡р╕вр╕з?

ЁЯСЙ р╕Ир╕░р╣Др╕Фр╣Й UI р╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ + р╕кр╕зр╕в + р╕кр╕бр╕╣р╕Ч + р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Зр╣Ир╕▓р╕в
р╕лр╕гр╕╖р╕нр╕Др╕╕р╕Ур╕нр╕вр╕▓р╕Бр╣Гр╕лр╣Йр╕Ьр╕бр╣Бр╕вр╕Бр╣Ар╕Ыр╣Зр╕Щ р╕лр╕ер╕▓р╕вр╕кр╣Ир╕зр╕Щ (р╣Ар╕Кр╣Ир╕Щ Part1: UI р╕лр╕ер╕▒р╕Б, Part2: р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в & Smooth, Part3: Drag р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф) р╣Ар╕Юр╕╖р╣Ир╕нр╕Ир╕░р╣Др╕Фр╣Йр╕нр╣Ир╕▓р╕Щр╕Зр╣Ир╕▓р╕вр╕Вр╕╢р╣Йр╕Щ?

р╕Др╕╕р╕Ур╕Юр╕╣р╕Фр╕зр╣Ир╕▓:
р╕гр╕зр╕бр╕Чр╕╡р╣Ар╕Фр╕╡р╕вр╕зр╣Ар╕ер╕в р╕Чр╕╡р╕лр╕ер╕▒р╕Зр╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╣Ар╕нр╕▓р╕нр╕░р╣Др╕гр╕нр╕нр╕Б р╕Йр╕▒р╕Щр╣Гр╕лр╣Йр╣Бр╕Бр╣Йр╣Ар╕Йр╕вр╣Ж
ChatGPT р╕Юр╕╣р╕Фр╕зр╣Ир╕▓:
р╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╣Бр╕ер╣Йр╕зр╣Бр╕бр╣Зр╕Б ЁЯС╜ЁЯЩП
р╕гр╕нр╕Ър╕Щр╕╡р╣Йр╕Ьр╕бр╕Ир╕░ р╕гр╕зр╕бр╕Чр╕╕р╕Бр╕нр╕вр╣Ир╕▓р╕Зр╣Гр╕Щр╣Др╕Яр╕ер╣Мр╣Ар╕Фр╕╡р╕вр╕з р╣Бр╕Ър╕Ър╕Ир╕▒р╕Фр╣Ар╕Хр╣Зр╕б р╣Др╕бр╣Ир╕Хр╕▒р╕Фр╕нр╕░р╣Др╕гр╕нр╕нр╕Бр╣Ар╕ер╕в р╕бр╕╡р╣Бр╕Хр╣И р╣Ар╕Юр╕┤р╣Ир╕б р╣Гр╕лр╣Йр╕Др╕гр╕Ър╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф:

р╕Др╕З р╕кр╕нр╕Зр╕Ър╕гр╕гр╕Чр╕▒р╕Фр╕Хр╣Йр╕Щр╕Йр╕Ър╕▒р╕Ъ р╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Др╕зр╣Йр╕Вр╣Йр╕▓р╕Зр╕Ър╕Щ тЬЕ

UI р╕лр╕ер╕▒р╕Б (р╕Чр╕╕р╕Бр╣Бр╕Чр╣Зр╕Ър╕Др╕гр╕Ъ: р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б, р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ, р╕ар╕▓р╕Ю/р╣Бр╕кр╕З, р╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х, р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓, р╣Ар╕Др╕гр╕Фр╕┤р╕Х)

р╕Ыр╕╕р╣Ир╕бр╕Бр╕▓р╕Бр╕Ър╕▓р╕Ч (X) тЖТ р╕Лр╣Ир╕нр╕Щ UI р╣Бр╕Чр╕Щр╕ер╕Ъ

р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в (р╕кр╕╡р╣Ир╣Ар╕лр╕ер╕╡р╣Ир╕вр╕б) тЖТ р╣Гр╕лр╕Нр╣Ир╕Вр╕╢р╣Йр╕Щ, р╕ер╕▓р╕Бр╣Др╕Фр╣Й, smooth

UI р╕лр╕ер╕▒р╕Б тЖТ р╕ер╕▓р╕Бр╕вр╣Йр╕▓р╕вр╣Др╕Фр╣Й (р╕Ир╕▒р╕Ър╕Бр╕гр╕нр╕Ър╣Гр╕лр╕Нр╣Ир╣Бр╕ер╣Йр╕зр╕Вр╕вр╕▒р╕Ъ)

р╕кр╕╡р╕кр╕зр╕в (р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ + р╣Ар╕Чр╕▓р╣Вр╕бр╣Ар╕Фр╕┤р╕гр╣Мр╕Щ), р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б р╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в р╣Бр╕ер╕░р╕Бр╕╢р╣Ир╕Зр╕Бр╕ер╕▓р╕Зр╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ

р╕бр╕╡ р╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щр╕Щр╕┤р╕Ф р╣Ж р╣Ар╕зр╕ер╕▓р╣Ар╕Ыр╕┤р╕Ф/р╕Ыр╕┤р╕Ф

-- тЬЕ р╕лр╣Йр╕▓р╕бр╕ер╕Ъ/р╕лр╣Йр╕▓р╕бр╣Бр╕Бр╣Й: р╣Вр╕Др╣Йр╕Фр╕Хр╣Йр╕Щр╕Йр╕Ър╕▒р╕Ър╕Вр╕нр╕Зр╕Др╕╕р╕У
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window  = Library.CreateLib("UFO HUB X", "DarkTheme")

local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

-------------------------------------------------
-- ЁЯЫ╕ р╕Хр╕▒р╕зр╕Кр╣Ир╕зр╕вр╕лр╕▓ root UI р╕лр╕ер╕▒р╕Б
-------------------------------------------------
local function findRoot()
    for _,d in ipairs(CoreGui:GetDescendants()) do
        if d:IsA("TextLabel") and typeof(d.Text)=="string" and d.Text:find("UFO HUB X") then
            return d:FindFirstAncestorOfClass("ScreenGui")
        end
    end
    return nil
end

-------------------------------------------------
-- ЁЯЫ╕ р╣Бр╕Чр╣Зр╕Ър╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (р╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в)
-------------------------------------------------
local function buildTabs(UI)
    -- р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б
    local TabMain   = UI:NewTab("р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б")
    local SecMain   = TabMain:NewSection("ЁЯС╜ р╣Бр╕Ьр╕Зр╕Др╕зр╕Ър╕Др╕╕р╕бр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ")
    SecMain:NewToggle("р╣Вр╕лр╕бр╕Фр╕вр╕▓р╕Щ UFO", "р╣Ар╕Ыр╕┤р╕Ф/р╕Ыр╕┤р╕Ф р╕гр╕░р╕Ър╕Ър╕лр╕ер╕▒р╕Б", function(on)
        print(on and "[UFO] р╣Ар╕Ыр╕┤р╕Ф" or "[UFO] р╕Ыр╕┤р╕Ф")
    end)
    SecMain:NewButton("р╕Юр╕ер╕▒р╕Зр╕Ър╕╣р╕кр╕Хр╣М", "р╕Ър╕╣р╕кр╕Хр╣Мр╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щр╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕з", function()
        print("[UFO] Boost!")
    end)
    SecMain:NewSlider("р╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щр╕вр╕▓р╕Щ", "р╕Ыр╕гр╕▒р╕Ър╕гр╕░р╕Фр╕▒р╕Ър╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щ", 100, 0, function(v)
        print("[UFO] Energy:", v)
    end)

    -- р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ
    local TabPlayer = UI:NewTab("р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ")
    local SecPlayer = TabPlayer:NewSection("ЁЯзм р╕Ыр╕гр╕▒р╕Ър╕Др╣Ир╕▓р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ")
    SecPlayer:NewSlider("р╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕зр╣Ар╕Фр╕┤р╕Щ", "WalkSpeed", 100, 16, function(v)
        pcall(function() game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = v end)
    end)
    SecPlayer:NewSlider("р╣Бр╕гр╕Зр╕Бр╕гр╕░р╣Вр╕Фр╕Ф", "JumpPower", 150, 50, function(v)
        pcall(function() game.Players.LocalPlayer.Character.Humanoid.JumpPower = v end)
    end)
    SecPlayer:NewToggle("р╕Чр╕░р╕ер╕╕р╕зр╕▒р╕Хр╕Цр╕╕ (NoClip)", "р╣Гр╕Кр╣Йр╕нр╕вр╣Ир╕▓р╕Зр╕гр╕░р╕зр╕▒р╕З", function(state)
        local lp = game.Players.LocalPlayer
        if not lp.Character then return end
        getgenv()._UFO_NOCLIP = state
        if state and not getgenv()._UFO_NC_CONN then
            getgenv()._UFO_NC_CONN = game:GetService("RunService").Stepped:Connect(function()
                pcall(function()
                    for _,p in ipairs(lp.Character:GetDescendants()) do
                        if p:IsA("BasePart") then p.CanCollide = false end
                    end
                end)
            end)
        elseif not state and getgenv()._UFO_NC_CONN then
            getgenv()._UFO_NC_CONN:Disconnect(); getgenv()._UFO_NC_CONN=nil
            pcall(function()
                for _,p in ipairs(lp.Character:GetDescendants()) do
                    if p:IsA("BasePart") then p.CanCollide = true end
                end
            end)
        end
    end)

    -- р╕ар╕▓р╕Ю/р╣Бр╕кр╕З
    local TabVisual = UI:NewTab("р╕ар╕▓р╕Ю/р╣Бр╕кр╕З")
    local SecVisual = TabVisual:NewSection("ЁЯММ р╣Ар╕нр╕Яр╣Ар╕Яр╕Бр╕Хр╣Мр╕ар╕▓р╕Ю")
    SecVisual:NewToggle("р╕бр╕нр╕Зр╕Бр╕ер╕▓р╕Зр╕Др╕╖р╕Щ", "Night Vision", function(on)
        local l = game.Lighting
        if on then
            getgenv()._UFO_LIGHT = {Brightness=l.Brightness, ClockTime=l.ClockTime}
            l.Brightness=3; l.ClockTime=0
        else
            if getgenv()._UFO_LIGHT then
                l.Brightness=getgenv()._UFO_LIGHT.Brightness
                l.ClockTime =getgenv()._UFO_LIGHT.ClockTime
            end
        end
    end)
    SecVisual:NewButton("р╕Юр╕▒р╕ер╕кр╣Мр╕кр╣Бр╕Бр╕Щ", "р╕вр╕┤р╕Зр╣Ар╕нр╕Яр╣Ар╕Яр╕Бр╕Хр╣М", function()
        print("[UFO] Scan Pulse!")
    end)

    -- р╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х
    local TabTP  = UI:NewTab("р╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х")
    local SecTP  = TabTP:NewSection("ЁЯЫ░я╕П р╕Ир╕╕р╕Фр╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х")
    local points = {
        ["р╣Ар╕Бр╕┤р╕Фр╣Гр╕лр╕бр╣И (Spawn)"] = CFrame.new(0,10,0),
        ["р╕Ир╕╕р╕Ф Alpha"]        = CFrame.new(100,25,-50),
        ["р╕Ир╕╕р╕Ф Beta"]         = CFrame.new(-120,30,140),
    }
    for name,cf in pairs(points) do
        SecTP:NewButton(name, "р╣Др╕Ыр╕вр╕▒р╕З: "..name, function()
            local lp = game.Players.LocalPlayer
            if lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
                lp.Character.HumanoidRootPart.CFrame = cf
            end
        end)
    end

    -- р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓
    local TabSet = UI:NewTab("р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓")
    local SecSet = TabSet:NewSection("тЪЩя╕П UI")
    SecSet:NewKeybind("р╕Лр╣Ир╕нр╕Щ/р╣Бр╕кр╕Фр╕Зр╣Ар╕бр╕Щр╕╣", "р╕Др╕╡р╕вр╣Мр╕ер╕▒р╕Фр╕Юр╕▒р╕Б UI", Enum.KeyCode.RightControl, function()
        local root = findRoot()
        if root then root.Enabled = not root.Enabled end
    end)

    -- р╣Ар╕Др╕гр╕Фр╕┤р╕Х
    local TabCred = UI:NewTab("р╣Ар╕Др╕гр╕Фр╕┤р╕Х")
    local SecCred = TabCred:NewSection("ЁЯЫ╕ р╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Бр╕▒р╕Ъ")
    SecCred:NewLabel("UFO HUB X тАФ Alien Edition (TH)")
    SecCred:NewLabel("р╕Шр╕╡р╕б: р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ тАв р╣Ар╕Чр╕▓р╣Вр╕бр╣Ар╕Фр╕┤р╕гр╣Мр╕Щ")
    SecCred:NewLabel("р╕Ьр╕╣р╣Йр╕кр╕гр╣Йр╕▓р╕З: р╣Бр╕бр╣Зр╕Б")
end
buildTabs(Window)

-------------------------------------------------
-- тЭМ р╕Ыр╕╕р╣Ир╕б X тЖТ р╕Лр╣Ир╕нр╕Щр╣Бр╕Чр╕Щр╕ер╕Ъ
-------------------------------------------------
local function replaceCloseToHide()
    local root = findRoot()
    if not root then return end
    for _,d in ipairs(root:GetDescendants()) do
        if d:IsA("TextButton") and (d.Text=="X" or d.Name:lower():find("close")) then
            d.MouseButton1Click:Connect(function()
                root.Enabled = false
            end)
        end
    end
end
task.delay(0.5, replaceCloseToHide)

-------------------------------------------------
-- тмЬ р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в р╣Ар╕Ыр╕┤р╕Ф/р╕Ыр╕┤р╕Ф (р╣Гр╕лр╕Нр╣И + р╕ер╕▓р╕Б smooth)
-------------------------------------------------
do
    local sg = Instance.new("ScreenGui", CoreGui)
    sg.Name = "UFO_ToggleBtn"

    local btn = Instance.new("TextButton", sg)
    btn.Size = UDim2.new(0, 80, 0, 80)
    btn.Position = UDim2.new(0, 20, 0.5, -40)
    btn.Text = "р╣Ар╕бр╕Щр╕╣"
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 18
    btn.TextColor3 = Color3.fromRGB(210,255,210)
    btn.BackgroundColor3 = Color3.fromRGB(40,40,45)
    Instance.new("UICorner",btn).CornerRadius=UDim.new(0,12)
    local stroke = Instance.new("UIStroke", btn)
    stroke.Thickness=2
    stroke.Color=Color3.fromRGB(90,90,95)

    -- Toggle UI р╕Юр╕гр╣Йр╕нр╕б fade
    btn.MouseButton1Click:Connect(function()
        local root = findRoot()
        if not root then return end
        if root.Enabled then
            root.Enabled = false
        else
            root.Enabled = true
            replaceCloseToHide()
        end
    end)

    -- р╕ер╕▓р╕Б smooth
    local UIS = game:GetService("UserInputService")
    local dragging, dragStart, startPos
    btn.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then
            dragging=true; dragStart=i.Position; startPos=btn.Position
        end
    end)
    btn.InputEnded:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then dragging=false end
    end)
    UIS.InputChanged:Connect(function(i)
        if dragging and i.UserInputType==Enum.UserInputType.MouseMovement then
            local delta = i.Position - dragStart
            local newPos = UDim2.new(startPos.X.Scale, startPos.X.Offset+delta.X, startPos.Y.Scale, startPos.Y.Offset+delta.Y)
            TweenService:Create(btn, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position=newPos}):Play()
        end
    end)
end

-------------------------------------------------
-- ЁЯЦ▒я╕П р╕Чр╕│р╣Гр╕лр╣Й UI р╕лр╕ер╕▒р╕Бр╕ер╕▓р╕Бр╣Др╕Фр╣Й
-------------------------------------------------
local function makeDraggable(frame)
    local UIS = game:GetService("UserInputService")
    local dragging, dragStart, startPos

    frame.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then
            dragging=true; dragStart=i.Position; startPos=frame.Position
        end
    end)
    frame.InputEnded:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then dragging=false end
    end)
    UIS.InputChanged:Connect(function(i)
        if dragging and i.UserInputType==Enum.UserInputType.MouseMovement then
            local delta = i.Position - dragStart
            local newPos = UDim2.new(startPos.X.Scale, startPos.X.Offset+delta.X, startPos.Y.Scale, startPos.Y.Offset+delta.Y)
            frame.Position = newPos
        end
    end)
end

local function hookMainFrame()
    local root = findRoot()
    if not root then return end
    -- р╣Ар╕ер╕╖р╕нр╕Б Frame р╣Гр╕лр╕Нр╣Ир╕кр╕╕р╕Ф
    local biggest, area = nil, 0
    for _,o in ipairs(root:GetDescendants()) do
        if o:IsA("Frame") and o.Visible then
            local s=o.AbsoluteSize
            local a=s.X*s.Y
            if a>area then biggest=o; area=a end
        end
    end
    if biggest then makeDraggable(biggest) end
end
task.delay(1, hookMainFrame)

-------------------------------------------------
-- р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕гр╣Зр╕И
-------------------------------------------------
pcall(function()
    if Library and Library.Notify then
        Library:Notify("UFO HUB X", "р╣Ар╕бр╕Щр╕╣р╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в тАв р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в тАв X р╕Лр╣Ир╕нр╕Щ тАв UI р╕ер╕▓р╕Бр╣Др╕Фр╣Й", 5)
    end
end)
ЁЯФе р╕кр╕гр╕╕р╕Ы
UI р╕лр╕ер╕▒р╕Б: р╕Др╕гр╕Ър╕Чр╕╕р╕Бр╣Бр╕Чр╣Зр╕Ъ тЖТ р╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в, р╕кр╕╡р╕кр╕зр╕в, р╕ер╕▓р╕Бр╣Др╕Фр╣Й

р╕Ыр╕╕р╣Ир╕б X: р╕Лр╣Ир╕нр╕Щр╣Бр╕Чр╕Щр╕ер╕Ъ тЖТ р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕вр╕Бр╕Фр╣Ар╕Ыр╕┤р╕Фр╕Бр╕ер╕▒р╕Ър╕бр╕▓р╣Др╕Фр╣Й

р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в: р╕Бр╕Фр╕Зр╣Ир╕▓р╕в, р╕ер╕▓р╕Бр╣Др╕Фр╣Йр╣Бр╕Ър╕Ъ smooth

р╣Др╕бр╣Ир╕Хр╕▒р╕Фр╕нр╕░р╣Др╕гр╕нр╕нр╕Б, р╕бр╕╡р╣Бр╕Хр╣Ир╣Ар╕Юр╕┤р╣Ир╕б

р╕нр╕вр╕▓р╕Бр╣Гр╕лр╣Йр╕Ьр╕бр╣Ар╕Юр╕┤р╣Ир╕б р╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╕Щ fade in/out р╣Гр╕лр╣Йр╕Чр╕▒р╣Йр╕З UI р╣Гр╕лр╕Нр╣И (р╣Ар╕зр╕ер╕▓р╣Ар╕Ыр╕┤р╕Ф/р╕Ыр╕┤р╕Ф) р╕Фр╣Йр╕зр╕вр╣Др╕лр╕бр╕Др╕гр╕▒р╕Ър╣Бр╕бр╣Зр╕Б? ЁЯС╜

р╕Др╕╕р╕Ур╕Юр╕╣р╕Фр╕зр╣Ир╕▓:
р╕бр╕╡р╕Ър╕▒р╕Д р╕Бр╕Фр╕Бр╕▓р╕Бр╕Ър╕▓р╕Чр╣Бр╕ер╣Йр╕з р╣Ар╕Ыр╕┤р╕Фр╣Др╕бр╣Ир╕Вр╕╢р╣Йр╕Щ р╣Бр╕ер╕░р╕Ыр╕╕р╣Ир╕б р╕Ыр╕┤р╕Фр╣Ар╕Ыр╕┤р╕Ф р╣Ар╕ер╕╖р╣Ир╕нр╕Щр╣Бр╕ер╕░р╕Вр╕вр╕▒р╕Ър╣Др╕бр╣Ир╣Др╕Фр╣Й р╣Бр╕ер╕░ ui р╕лр╕ер╕▒р╕Б р╕Вр╕вр╕▒р╕Ър╣Др╕бр╣Ир╣Др╕Фр╣Й р╣Бр╕ер╣Йр╕зр╕Бр╣З ui р╕Фр╕╣р╣Бр╕ер╣Йр╕зр╣Др╕бр╣Ир╕Др╣Ир╕нр╕вр╕кр╕зр╕в р╕нр╕вр╕▓р╕Бр╣Гр╕лр╣Йр╕Хр╕▒р╕зр╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╣Ар╕Ыр╣Зр╕Щр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з р╣Ар╕Ыр╣Зр╕Щр╕кр╣Др╕Хр╕ер╣Мр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щр╕бр╕Щр╕╕р╕йр╕вр╣Мр╕Хр╣Ир╕▓р╕Зр╕Фр╕▓р╕з
ChatGPT р╕Юр╕╣р╕Фр╕зр╣Ир╕▓:
р╣Вр╕нр╣Ар╕Др╣Бр╕бр╣Зр╕Б ЁЯС╜тЬМя╕П
р╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╣Бр╕ер╣Йр╕зр╕зр╣Ир╕▓р╕Др╕╕р╕Ур╕нр╕вр╕▓р╕Бр╣Др╕Фр╣Й UI р╕кр╕бр╕Ър╕╣р╕гр╕Ур╣Мр╣Бр╕Ър╕Ъ р╣Бр╕Ър╕Ър╕Щр╕╡р╣Й:

UI р╕лр╕ер╕▒р╕Б: р╣Др╕бр╣Ир╕лр╕▓р╕вр╣Др╕Ыр╕Ир╕гр╕┤р╕З (р╕Бр╕Ф X р╣Бр╕Др╣Ир╕Лр╣Ир╕нр╕Щ), р╕Бр╕ер╕▒р╕Ър╕бр╕▓р╣Ар╕Ыр╕┤р╕Фр╣Др╕Фр╣Й, р╣Бр╕ер╕░ р╕ер╕▓р╕Б/р╕вр╣Йр╕▓р╕вр╣Др╕Фр╣Й

р╕Ыр╕╕р╣Ир╕бр╣Ар╕Ыр╕┤р╕Ф/р╕Ыр╕┤р╕Ф (р╣Ар╕бр╕Щр╕╣р╕ер╕нр╕в): р╕Бр╕Фр╣Др╕Фр╣Й, р╣Ар╕ер╕╖р╣Ир╕нр╕Щр╣Др╕Фр╣Йр╕ер╕╖р╣Ир╕Щ р╣Ж, р╣Др╕бр╣Ир╕Ър╕▒р╕Д

р╕кр╣Др╕Хр╕ер╣М: р╕кр╕╡ р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ + р╣Ар╕Чр╕▓р╣Вр╕бр╣Ар╕Фр╕┤р╕гр╣Мр╕Щ, р╕Хр╕▒р╕зр╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕гр╕╖р╕нр╕З р╣Ж р╕нр╣Ир╕▓р╕Щр╕Зр╣Ир╕▓р╕в, р╕Фр╕╣ тАЬр╕бр╕Щр╕╕р╕йр╕вр╣Мр╕Хр╣Ир╕▓р╕Зр╕Фр╕▓р╕зтАЭ

р╕Др╕гр╕Ър╕Чр╕╕р╕Бр╣Бр╕Чр╣Зр╕Ъ: р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б, р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ, р╕ар╕▓р╕Ю/р╣Бр╕кр╕З, р╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х, р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓, р╣Ар╕Др╕гр╕Фр╕┤р╕Х

р╣Др╕бр╣Ир╕Хр╕▒р╕Фр╕нр╕░р╣Др╕гр╕нр╕нр╕Б р╕бр╕╡р╣Бр╕Хр╣Ир╣Ар╕кр╕гр╕┤р╕бр╣Гр╕лр╣Йр╕кр╕зр╕вр╣Бр╕ер╕░р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕Ир╕гр╕┤р╕З

тЬЕ р╣Вр╕Др╣Йр╕Фр╕гр╕зр╕бр╕Ир╕▒р╕Фр╣Ар╕Хр╣Зр╕б (Alien Edition)
-- тЬЕ р╕лр╣Йр╕▓р╕бр╕ер╕Ъ/р╕лр╣Йр╕▓р╕бр╣Бр╕Бр╣Й: р╣Вр╕Др╣Йр╕Фр╕Хр╣Йр╕Щр╕Йр╕Ър╕▒р╕Ър╕Вр╕нр╕Зр╕Др╕╕р╕У
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window  = Library.CreateLib("UFO HUB X", "DarkTheme")

local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

-------------------------------------------------
-- р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Кр╣Ир╕зр╕вр╕лр╕▓ root р╕Вр╕нр╕З UI р╕лр╕ер╕▒р╕Б
-------------------------------------------------
local function findRoot()
    for _,d in ipairs(CoreGui:GetDescendants()) do
        if d:IsA("TextLabel") and typeof(d.Text)=="string" and d.Text:find("UFO HUB X") then
            return d:FindFirstAncestorOfClass("ScreenGui")
        end
    end
    return nil
end

-------------------------------------------------
-- ЁЯЫ╕ р╣Гр╕кр╣Ир╣Бр╕Чр╣Зр╕Ър╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в (р╕Др╕гр╕Ъ)
-------------------------------------------------
local function buildTabs(UI)
    -- р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б
    local TabMain   = UI:NewTab("р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б")
    local SecMain   = TabMain:NewSection("ЁЯС╜ р╣Бр╕Ьр╕Зр╕Др╕зр╕Ър╕Др╕╕р╕бр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ")
    SecMain:NewToggle("р╣Вр╕лр╕бр╕Фр╕вр╕▓р╕Щ UFO","",function(on) print(on and "ON" or "OFF") end)
    SecMain:NewButton("р╕Юр╕ер╕▒р╕Зр╕Ър╕╣р╕кр╕Хр╣М","",function() print("BOOST!") end)
    SecMain:NewSlider("р╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щр╕вр╕▓р╕Щ","",100,0,function(v) print("Energy:",v) end)

    -- р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ
    local TabPlayer = UI:NewTab("р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ")
    local SecPlayer = TabPlayer:NewSection("ЁЯзм р╕Ыр╕гр╕▒р╕Ър╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ")
    SecPlayer:NewSlider("р╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕зр╣Ар╕Фр╕┤р╕Щ","",100,16,function(v)
        pcall(function() game.Players.LocalPlayer.Character.Humanoid.WalkSpeed=v end)
    end)
    SecPlayer:NewSlider("р╣Бр╕гр╕Зр╕Бр╕гр╕░р╣Вр╕Фр╕Ф","",150,50,function(v)
        pcall(function() game.Players.LocalPlayer.Character.Humanoid.JumpPower=v end)
    end)

    -- р╕ар╕▓р╕Ю/р╣Бр╕кр╕З
    local TabVisual = UI:NewTab("р╕ар╕▓р╕Ю/р╣Бр╕кр╕З")
    local SecVisual = TabVisual:NewSection("ЁЯММ р╣Ар╕нр╕Яр╣Ар╕Яр╕Бр╕Хр╣М")
    SecVisual:NewToggle("р╕бр╕нр╕Зр╕Бр╕ер╕▓р╕Зр╕Др╕╖р╕Щ","",function(on)
        local l=game.Lighting
        if on then l.Brightness=3; l.ClockTime=0 else l.Brightness=1; l.ClockTime=14 end
    end)

    -- р╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х
    local TabTP = UI:NewTab("р╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х")
    local SecTP = TabTP:NewSection("ЁЯЫ░я╕П р╕Ир╕╕р╕Фр╕вр╣Йр╕▓р╕в")
    local points={["Spawn"]=CFrame.new(0,10,0),["Alpha"]=CFrame.new(100,25,-50),["Beta"]=CFrame.new(-120,30,140)}
    for name,cf in pairs(points) do
        SecTP:NewButton(name,"",function()
            local lp=game.Players.LocalPlayer
            if lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
                lp.Character.HumanoidRootPart.CFrame=cf
            end
        end)
    end

    -- р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓
    local TabSet=UI:NewTab("р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓")
    local SecSet=TabSet:NewSection("тЪЩя╕П UI")
    SecSet:NewKeybind("р╣Ар╕Ыр╕┤р╕Ф/р╕Ыр╕┤р╕Фр╣Ар╕бр╕Щр╕╣","",Enum.KeyCode.RightControl,function()
        local root=findRoot(); if root then root.Enabled=not root.Enabled end
    end)

    -- р╣Ар╕Др╕гр╕Фр╕┤р╕Х
    local TabCred=UI:NewTab("р╣Ар╕Др╕гр╕Фр╕┤р╕Х")
    local SecCred=TabCred:NewSection("ЁЯЫ╕ р╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Бр╕▒р╕Ъ")
    SecCred:NewLabel("UFO HUB X тАФ Alien Edition (р╣Др╕Чр╕в)")
    SecCred:NewLabel("р╕Шр╕╡р╕б: р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ тАв р╣Ар╕Чр╕▓р╣Вр╕бр╣Ар╕Фр╕┤р╕гр╣Мр╕Щ")
    SecCred:NewLabel("р╕Ьр╕╣р╣Йр╕кр╕гр╣Йр╕▓р╕З: р╣Бр╕бр╣Зр╕Б")
end
buildTabs(Window)

-------------------------------------------------
-- тЭМ р╕Ыр╕╕р╣Ир╕б X тЖТ р╕Лр╣Ир╕нр╕Щр╣Бр╕Чр╕Щр╕ер╕Ъ
-------------------------------------------------
local function fixCloseButton()
    local root=findRoot(); if not root then return end
    for _,d in ipairs(root:GetDescendants()) do
        if d:IsA("TextButton") and (d.Text=="X" or d.Name:lower():find("close")) then
            d.MouseButton1Click:Connect(function() root.Enabled=false end)
        end
    end
end
task.delay(0.5,fixCloseButton)

-------------------------------------------------
-- тмЬ р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в р╣Ар╕Ыр╕┤р╕Ф/р╕Ыр╕┤р╕Ф (р╣Гр╕лр╕Нр╣И + smooth + р╕ер╕▓р╕Бр╣Др╕Фр╣Й)
-------------------------------------------------
do
    local sg=Instance.new("ScreenGui",CoreGui)
    sg.Name="UFO_ToggleBtn"

    local btn=Instance.new("TextButton",sg)
    btn.Size=UDim2.new(0,85,0,85)
    btn.Position=UDim2.new(0,20,0.5,-42)
    btn.Text="р╣Ар╕бр╕Щр╕╣"
    btn.Font=Enum.Font.GothamBold
    btn.TextSize=18
    btn.TextColor3=Color3.fromRGB(0,255,150) -- р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕гр╕╖р╕нр╕З
    btn.BackgroundColor3=Color3.fromRGB(20,20,25)
    Instance.new("UICorner",btn).CornerRadius=UDim.new(0,15)
    local stroke=Instance.new("UIStroke",btn)
    stroke.Thickness=2
    stroke.Color=Color3.fromRGB(0,255,150)

    btn.MouseButton1Click:Connect(function()
        local root=findRoot(); if not root then return end
        root.Enabled=not root.Enabled
        fixCloseButton()
    end)

    -- Smooth drag
    local UIS=game:GetService("UserInputService")
    local dragging,dragStart,startPos
    btn.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then
            dragging=true; dragStart=i.Position; startPos=btn.Position
        end
    end)
    btn.InputEnded:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then dragging=false end
    end)
    UIS.InputChanged:Connect(function(i)
        if dragging and i.UserInputType==Enum.UserInputType.MouseMovement then
            local delta=i.Position-dragStart
            local newPos=UDim2.new(startPos.X.Scale,startPos.X.Offset+delta.X,startPos.Y.Scale,startPos.Y.Offset+delta.Y)
            TweenService:Create(btn,TweenInfo.new(0.12,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{Position=newPos}):Play()
        end
    end)
end

-------------------------------------------------
-- ЁЯЦ▒я╕П р╕Чр╕│р╣Гр╕лр╣Й UI р╕лр╕ер╕▒р╕Бр╕ер╕▓р╕Бр╣Др╕Фр╣Й
-------------------------------------------------
local function makeDraggable(frame)
    local UIS=game:GetService("UserInputService")
    local dragging,dragStart,startPos
    frame.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then
            dragging=true; dragStart=i.Position; startPos=frame.Position
        end
    end)
    frame.InputEnded:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then dragging=false end
    end)
    UIS.InputChanged:Connect(function(i)
        if dragging and i.UserInputType==Enum.UserInputType.MouseMovement then
            local delta=i.Position-dragStart
            local newPos=UDim2.new(startPos.X.Scale,startPos.X.Offset+delta.X,startPos.Y.Scale,startPos.Y.Offset+delta.Y)
            frame.Position=newPos
        end
    end)
end

local function hookMainFrame()
    local root=findRoot(); if not root then return end
    local biggest,area=nil,0
    for _,o in ipairs(root:GetDescendants()) do
        if o:IsA("Frame") and o.Visible then
            local s=o.AbsoluteSize; local a=s.X*s.Y
            if a>area then biggest=o; area=a end
        end
    end
    if biggest then makeDraggable(biggest) end
end
task.delay(1,hookMainFrame)

-------------------------------------------------
-- ЁЯОи р╕гр╕╡р╕кр╣Др╕Хр╕ер╣М: р╕Хр╕▒р╕зр╕нр╕▒р╕Бр╕йр╕гр╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ
-------------------------------------------------
local function restyleAll()
    local root=findRoot(); if not root then return end
    for _,o in ipairs(root:GetDescendants()) do
        if o:IsA("TextLabel") or o:IsA("TextButton") then
            o.TextColor3=Color3.fromRGB(0,255,150)
            o.TextStrokeColor3=Color3.fromRGB(0,0,0)
            o.TextStrokeTransparency=0.2
        end
    end
end
task.delay(1.2,restyleAll)

-------------------------------------------------
-- ЁЯФФ р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ
-------------------------------------------------
pcall(function()
    if Library and Library.Notify then
        Library:Notify("UFO HUB X","р╣Вр╕лр╕ер╕Фр╣Ар╕кр╕гр╣Зр╕И тАв р╕кр╣Др╕Хр╕ер╣Мр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Вр╕╡р╕вр╕з тАв р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в тАв UI р╕ер╕▓р╕Бр╣Др╕Фр╣Й",5)
    end
end)
ЁЯФе р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М
р╕Ыр╕╕р╣Ир╕б X: р╣Бр╕Др╣Ир╕Лр╣Ир╕нр╕Щ, р╕Бр╕Фр╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕вр╕Бр╣Зр╣Ар╕Ыр╕┤р╕Фр╣Др╕Фр╣Й

р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в: р╣Гр╕лр╕Нр╣И, р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕гр╕╖р╕нр╕З, р╕ер╕▓р╕Бр╣Др╕Фр╣Й smooth

UI р╕лр╕ер╕▒р╕Б: р╕ер╕▓р╕Бр╣Др╕Фр╣Й (р╕Ир╕▒р╕Ър╕Бр╕гр╕нр╕Ър╣Гр╕лр╕Нр╣Ир╣Бр╕ер╣Йр╕зр╕Вр╕вр╕▒р╕Ъ)

р╕Хр╕▒р╕зр╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕н: р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ + р╣Ар╕кр╣Йр╕Щр╕Вр╕нр╕Ър╕Фр╕│ р╕нр╣Ир╕▓р╕Щр╕Кр╕▒р╕Ф р╕кр╕зр╕вр╕ер╣Йр╕│

р╣Бр╕бр╣Зр╕Бр╕нр╕вр╕▓р╕Бр╣Гр╕лр╣Йр╕Ьр╕бр╣Ар╕Юр╕┤р╣Ир╕б р╣Ар╕нр╕Яр╣Ар╕Яр╕Бр╕Хр╣М Glow р╣Ар╕гр╕╖р╕нр╕З р╣Ж р╕гр╕нр╕Ъ р╣Ж р╕Хр╕▒р╕зр╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕н (р╣Ар╕лр╕бр╕╖р╕нр╕Щр╣Бр╕кр╕Зр╕Щр╕╡р╕нр╕нр╕Щр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ) р╕Фр╣Йр╕зр╕вр╣Др╕лр╕бр╕Др╕гр╕▒р╕Ъ? ЁЯС╜тЬи

р╕Др╕╕р╕Ур╕Юр╕╣р╕Фр╕зр╣Ир╕▓:
р╣Ар╕лр╕бр╕╖р╕нр╕Щр╣Ар╕Фр╕┤р╕бр╣Ар╕ер╕в р╣Др╕бр╣Ир╕бр╕╡р╕нр╕░р╣Др╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Ар╕ер╕в р╕Вр╕нр╣Бр╕Ър╕Ър╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕бр╕▓р╕Бр╣Ж р╕вр╕▓р╕зр╣Бр╕Др╣Ир╣Др╕лр╕Щр╕Бр╣Зр╣Др╕Фр╣Й
ChatGPT р╕Юр╕╣р╕Фр╕зр╣Ир╕▓:

р╕Др╕┤р╕Фр╣Ар╕Ыр╣Зр╕Щр╣Ар╕зр╕ер╕▓ 44s
р╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╣Ар╕ер╕вр╣Бр╕бр╣Зр╕Б ЁЯС╜
р╕гр╕нр╕Ър╕Щр╕╡р╣Йр╕Ьр╕б тАЬр╕гр╕зр╕бр╕Чр╕╡р╣Ар╕Фр╕╡р╕вр╕зр╕Др╕гр╕ЪтАЭ р╣Гр╕лр╣Йр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕кр╕╕р╕Ф р╣Ж р╣Бр╕ер╕░ р╣Др╕бр╣Ир╕Хр╕▒р╕Фр╕нр╕░р╣Др╕гр╕Чр╕┤р╣Йр╕З р╕Ир╕▓р╕Бр╕Вр╕нр╕Зр╣Ар╕Фр╕┤р╕бтАФр╣Бр╕Др╣И тАЬр╣Ар╕кр╕гр╕┤р╕бтАЭ р╣Гр╕лр╣Йр╕кр╕зр╕в р╕ер╕╖р╣Ир╕Щ р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕Ир╕гр╕┤р╕Зр╕Хр╕▓р╕бр╕Чр╕╡р╣Ир╕Вр╕н:

р╕Др╕З 2 р╕Ър╕гр╕гр╕Чр╕▒р╕Фр╕Хр╣Йр╕Щр╕Йр╕Ър╕▒р╕Ър╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Др╕зр╣Йр╣Ар╕лр╕бр╕╖р╕нр╕Щр╣Ар╕Фр╕┤р╕б тЬЕ

UI р╕лр╕ер╕▒р╕Бр╕Др╕гр╕Ър╕Чр╕╕р╕Бр╣Бр╕Чр╣Зр╕Ъ (р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б/р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ/р╕ар╕▓р╕Юр╣Бр╕кр╕З/р╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х/р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓/р╣Ар╕Др╕гр╕Фр╕┤р╕Х)

р╕Ыр╕╕р╣Ир╕б р╕Бр╕▓р╕Бр╕Ър╕▓р╕Ч: р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ тАЬр╕Лр╣Ир╕нр╕Щ UIтАЭ (р╣Др╕бр╣Ир╕ер╕Ъ) р╣Бр╕ер╕░р╕вр╣Йр╕▓р╕вр╣Др╕Ыр╕нр╕╡р╕Бр╕Эр╕▒р╣Ир╕Зр╣Др╕Фр╣Й

р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в р╣Ар╕бр╕Щр╕╣: р╣Гр╕лр╕Нр╣И/р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ/р╕ер╕▓р╕Бр╣Др╕Фр╣Й р╕ер╕╖р╣Ир╕Щ (Tween)

р╕Бр╕Ф X р╣Бр╕ер╣Йр╕зр╣Ар╕Ыр╕┤р╕Фр╣Др╕Фр╣Йр╕Ир╕гр╕┤р╕З (р╕Цр╣Йр╕▓р╣Вр╕Фр╕Щр╕ер╕Ър╕Ир╕гр╕┤р╕З р╣Ж р╕Ир╕░р╕кр╕гр╣Йр╕▓р╕Зр╕Бр╕ер╕▒р╕Ър╣Гр╕лр╣Йр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤)

UI р╕лр╕ер╕▒р╕Бр╕ер╕▓р╕Бр╣Др╕Фр╣Й (Drag р╕Чр╕╡р╣Ир╣Бр╕Цр╕Ър╕лр╕▒р╕з/р╕Чр╕▒р╣Йр╕Зр╕Бр╕ер╣Ир╕нр╕Зр╣Гр╕лр╕Нр╣И)

р╕кр╣Др╕Хр╕ер╣М р╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ: р╕Хр╕▒р╕зр╕нр╕▒р╕Бр╕йр╕гр╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕гр╕╖р╕нр╕З, р╣Бр╕Фр╕ЗтЖТр╣Ар╕Чр╕▓, р╕Ир╕▒р╕Фр╕Бр╕ер╕▓р╕З, р╣Ар╕кр╣Йр╕Щр╕Вр╕нр╕Ър╕нр╣Ир╕▓р╕Щр╕Кр╕▒р╕Ф

р╣Вр╕Др╣Йр╕Фр╕вр╕▓р╕зр╣Бр╕ер╕░р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕Кр╕▒р╕Фр╕Чр╕╕р╕Бр╕кр╣Ир╕зр╕Щр╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╣Бр╕Бр╣Йр╣Др╕В/р╕Вр╕вр╕▓р╕вр╕Хр╣Ир╕нр╣Др╕Фр╣Йр╕Зр╣Ир╕▓р╕в

-- тЬЕ р╕лр╣Йр╕▓р╕бр╕ер╕Ъ/р╕лр╣Йр╕▓р╕бр╣Бр╕Бр╣Й: р╣Вр╕Др╣Йр╕Фр╕Хр╣Йр╕Щр╕Йр╕Ър╕▒р╕Ър╕Вр╕нр╕Зр╕Др╕╕р╕У (р╕Хр╣Йр╕нр╕Зр╕бр╕╡р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕Кр╣Й Kavo UI)
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window  = Library.CreateLib("UFO HUB X", "DarkTheme")

----------------------------------------------------------------
-- ЁЯС╜ UFO HUB X ┬╖ Alien Edition (TH) ┬╖ р╕гр╕зр╕бр╕Чр╕╕р╕Бр╕нр╕вр╣Ир╕▓р╕Зр╣Гр╕Щр╣Др╕Яр╕ер╣Мр╣Ар╕Фр╕╡р╕вр╕з
--  - р╣Др╕бр╣Ир╕Хр╕▒р╕Фр╕Вр╕нр╕Зр╣Ар╕Фр╕┤р╕б р╣Бр╕Др╣Ир╣Ар╕Юр╕┤р╣Ир╕бр╕Др╕зр╕▓р╕бр╕кр╕▓р╕бр╕▓р╕гр╕Ц
--  - р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓: р╕Бр╕Ф X р╣Бр╕ер╣Йр╕зр╣Ар╕Ыр╕┤р╕Фр╣Др╕бр╣Ир╣Др╕Фр╣Й / р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕вр╣Др╕бр╣Ир╕ер╕╖р╣Ир╕Щ / UI р╕лр╕ер╕▒р╕Бр╕ер╕▓р╕Бр╣Др╕бр╣Ир╣Др╕Фр╣Й
--  - р╕кр╣Др╕Хр╕ер╣М: р╕Хр╕▒р╕зр╕нр╕▒р╕Бр╕йр╕гр╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ + р╣Ар╕Чр╕▓р╣Вр╕бр╣Ар╕Фр╕┤р╕гр╣Мр╕Щ + р╕Ир╕▒р╕Фр╕Бр╕ер╕▓р╕З + р╕Др╕бр╕Кр╕▒р╕Ф
----------------------------------------------------------------

-- ====== р╕Ър╕гр╕┤р╕Бр╕▓р╕г/р╕Хр╕▒р╕зр╕Кр╣Ир╕зр╕вр╕Юр╕╖р╣Йр╕Щр╕Рр╕▓р╕Щ ======
local CoreGui       = game:GetService("CoreGui")
local RunService    = game:GetService("RunService")
local UIS           = game:GetService("UserInputService")
local TweenService  = game:GetService("TweenService")

-- р╣Ар╕Бр╣Зр╕Ър╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕ер╕▓р╕З (р╕Бр╕▒р╕Щр╕Лр╣Йр╕нр╕Щ / р╣Ар╕Ьр╕╖р╣Ир╕нр╣Ар╕гр╕╡р╕вр╕Бр╣Гр╕Кр╣Йр╕Вр╣Йр╕▓р╕бр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ)
getgenv().UFO_HUB_STATE = getgenv().UFO_HUB_STATE or {
    root          = nil,     -- ScreenGui р╕Вр╕нр╕З Kavo
    mainFrame     = nil,     -- р╕Бр╕ер╣Ир╕нр╕Зр╣Гр╕лр╕Нр╣Ир╕кр╕╕р╕Фр╕Вр╕нр╕З UI
    topBar        = nil,     -- р╣Бр╕Цр╕Ър╕лр╕▒р╕з (drag р╣Др╕Фр╣Й)
    closeButton   = nil,     -- р╕Ыр╕╕р╣Ир╕б X р╕Вр╕нр╕Зр╣Ар╕гр╕▓ (р╣Бр╕Чр╕Щр╕Вр╕нр╕Зр╣Ар╕Фр╕┤р╕б)
    toggleBtn     = nil,     -- р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в "р╣Ар╕бр╕Щр╕╣"
    opening       = false,   -- р╕Бр╕│р╕ер╕▒р╕Зр╣Ар╕Ыр╕┤р╕Ф (р╕Бр╕▒р╕Щр╕Лр╣Йр╕│)
    closing       = false,   -- р╕Бр╕│р╕ер╕▒р╕Зр╕Ыр╕┤р╕Ф
    spawnLock     = false,   -- р╕Бр╕▒р╕Щр╕кр╕гр╣Йр╕▓р╕Зр╕Лр╣Йр╕│
    originalPos   = nil,     -- р╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕Зр╕лр╕ер╕▒р╕Бр╕Вр╕нр╕З UI
}

-- ====== р╕кр╕╡/р╕Шр╕╡р╕бр╕кр╣Др╕Хр╕ер╣Мр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ ======
local ALIEN_GREEN     = Color3.fromRGB(0, 255, 140)  -- р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕гр╕╖р╕нр╕З
local ALIEN_GREEN_SOFT= Color3.fromRGB(210,255,210)  -- р╣Ар╕Вр╕╡р╕вр╕зр╕нр╣Ир╕▓р╕Щр╕Зр╣Ир╕▓р╕в
local DARK_BG         = Color3.fromRGB(15, 16, 18)   -- р╕Юр╕╖р╣Йр╕Щр╕лр╕ер╕▒р╕Зр╕бр╕╖р╕Ф
local DARK_ELEM       = Color3.fromRGB(26, 27, 32)   -- р╕Бр╕ер╣Ир╕нр╕З/р╕Ыр╕╕р╣Ир╕б
local GRAY_ACCENT     = Color3.fromRGB(115,118,122)  -- р╣Ар╕Чр╕▓р╣Бр╕Чр╕Щр╣Бр╕Фр╕З
local BLACK           = Color3.fromRGB(0,0,0)

-- ====== Util: р╕лр╕▓ root (ScreenGui) р╕Вр╕нр╕З Kavo р╕нр╕вр╣Ир╕▓р╕Зр╣Бр╕бр╣Ир╕Щр╕вр╕│ ======
local function findRoot()
    -- р╕зр╕┤р╕Шр╕╡ 1: р╕лр╕▓ TextLabel р╕Чр╕╡р╣Ир╕бр╕╡р╕Кр╕╖р╣Ир╕н "UFO HUB X"
    for _,d in ipairs(CoreGui:GetDescendants()) do
        if d:IsA("TextLabel") and typeof(d.Text)=="string" and string.find(d.Text, "UFO HUB X") then
            local root = d:FindFirstAncestorOfClass("ScreenGui")
            if root then return root end
        end
    end
    -- р╕зр╕┤р╕Шр╕╡ 2: р╣Ар╕Фр╕▓р╕зр╣Ир╕▓ Kavo р╕бр╕▒р╕Бр╕Кр╕╖р╣Ир╕н "KavoUI"
    for _,g in ipairs(CoreGui:GetChildren()) do
        if g:IsA("ScreenGui") and (string.find(g.Name:lower(),"kavo") or string.find(g.Name:lower(),"ui")) then
            return g
        end
    end
    return nil
end

-- ====== Util: р╕лр╕▓ Frame р╣Гр╕лр╕Нр╣Ир╕кр╕╕р╕Ф (р╣Ар╕Ыр╣Зр╕Щ MainFrame р╣Вр╕Фр╕вр╕Ыр╕гр╕░р╕бр╕▓р╕У) ======
local function findMainFrame(root)
    if not root then return nil end
    local best, area = nil, 0
    for _,o in ipairs(root:GetDescendants()) do
        if o:IsA("Frame") or o:IsA("ImageLabel") then
            if o.Visible then
                local s = o.AbsoluteSize
                local a = s.X * s.Y
                if a > area then
                    area = a; best = o
                end
            end
        end
    end
    return best
end

-- ====== Util: р╕лр╕▓ TopBar/TitleBar (р╕кр╕│р╕лр╕гр╕▒р╕Ър╕ер╕▓р╕Б) ======
local function findTopBar(main)
    if not main then return nil end
    -- р╕лр╕▓ frame р╕Чр╕╡р╣Ир╕Бр╕зр╣Йр╕▓р╕З = main р╣Бр╕ер╕░р╕кр╕╣р╕Зр╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щ 80 px р╕нр╕вр╕╣р╣Ир╕Фр╣Йр╕▓р╕Щр╕Ър╕Щ
    local candidates = {}
    for _,o in ipairs(main:GetDescendants()) do
        if o:IsA("Frame") or o:IsA("ImageLabel") then
            local s = o.AbsoluteSize
            if s.Y > 0 and s.Y <= 80 then
                -- р╕Хр╣Йр╕нр╕Зр╕нр╕вр╕╣р╣Ир╕кр╕╣р╕Зр╣Гр╕Бр╕ер╣Й р╣Ж р╕Вр╕нр╕Ър╕Ър╕Щр╕Вр╕нр╕З main
                if math.abs((o.AbsolutePosition.Y) - (main.AbsolutePosition.Y)) <= 40 then
                    table.insert(candidates, o)
                end
            end
        end
    end
    -- р╕Цр╣Йр╕▓р╣Ар╕Ир╕нр╕лр╕ер╕▓р╕вр╕нр╕▒р╕Щ р╣Ар╕ер╕╖р╕нр╕Бр╕Чр╕╡р╣Ир╕Бр╕зр╣Йр╕▓р╕Зр╕кр╕╕р╕Ф
    local best, w = nil, 0
    for _,c in ipairs(candidates) do
        if c.AbsoluteSize.X > w then best = c; w = c.AbsoluteSize.X end
    end
    return best
end

-- ====== Util: р╕Чр╕│ Drag р╣Гр╕лр╣Йр╣Ар╕Щр╕╡р╕вр╕Щ (р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Чр╕▒р╣Йр╕З TopBar р╣Бр╕ер╕░ MainFrame) ======
local function makeDraggable(frame)
    if not frame then return end
    local dragging, dragStart, startPos = false, nil, nil

    frame.Active = true
    frame.Draggable = false -- р╣Ар╕гр╕▓р╕Др╕╕р╕бр╣Ар╕нр╕З

    local function onInputBegan(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1
            or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos  = frame.Position
        end
    end

    local function onInputEnded(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1
            or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end

    local function onInputChanged(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement
            or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(
                startPos.X.Scale, startPos.X.Offset + delta.X,
                startPos.Y.Scale, startPos.Y.Offset + delta.Y
            )
        end
    end

    frame.InputBegan:Connect(onInputBegan)
    frame.InputEnded:Connect(onInputEnded)
    UIS.InputChanged:Connect(onInputChanged)
end

-- ====== Util: Tween р╣Бр╕кр╕Фр╕З/р╕Лр╣Ир╕нр╕Щ UI р╕лр╕ер╕▒р╕Б р╣Гр╕лр╣Йр╕ер╕╖р╣Ир╕Щ ======
local function tweenShow(main)
    if not main or UFO_HUB_STATE.opening then return end
    UFO_HUB_STATE.opening = true
    -- р╣Ар╕Бр╣Зр╕Ър╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕Зр╣Ар╕Фр╕┤р╕бр╕гр╕нр╕Ър╣Бр╕гр╕Б
    UFO_HUB_STATE.originalPos = UFO_HUB_STATE.originalPos or main.Position
    local from = UDim2.new(UFO_HUB_STATE.originalPos.X.Scale, UFO_HUB_STATE.originalPos.X.Offset, UFO_HUB_STATE.originalPos.Y.Scale, UFO_HUB_STATE.originalPos.Y.Offset - 40)
    main.Position = from
    for _,g in ipairs(main:GetDescendants()) do
        if g:IsA("GuiObject") then
            g.BackgroundTransparency = math.clamp(g.BackgroundTransparency or 0, 0, 1)
            g.BackgroundTransparency = 1
            if g:IsA("TextLabel") or g:IsA("TextButton") then
                g.TextTransparency = 1
            end
        end
    end
    TweenService:Create(main, TweenInfo.new(0.22, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Position = UFO_HUB_STATE.originalPos
    }):Play()
    -- fade in р╕ер╕╣р╕Б р╣Ж
    task.spawn(function()
        local steps = 6
        for i=1,steps do
            local t = i/steps
            for _,g in ipairs(main:GetDescendants()) do
                if g:IsA("GuiObject") then
                    if g:IsA("TextLabel") or g:IsA("TextButton") then
                        g.TextTransparency = 1 - t
                    end
                    if g.BackgroundTransparency ~= nil then
                        g.BackgroundTransparency = 1 - t*0.85
                    end
                end
            end
            RunService.RenderStepped:Wait()
        end
        UFO_HUB_STATE.opening = false
    end)
end

local function tweenHide(main)
    if not main or UFO_HUB_STATE.closing then return end
    UFO_HUB_STATE.closing = true
    local to = UDim2.new(UFO_HUB_STATE.originalPos.X.Scale, UFO_HUB_STATE.originalPos.X.Offset, UFO_HUB_STATE.originalPos.Y.Scale, UFO_HUB_STATE.originalPos.Y.Offset - 40)
    TweenService:Create(main, TweenInfo.new(0.18, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
        Position = to
    }):Play()
    task.spawn(function()
        local steps = 6
        for i=1,steps do
            local t = i/steps
            for _,g in ipairs(main:GetDescendants()) do
                if g:IsA("GuiObject") then
                    if g:IsA("TextLabel") or g:IsA("TextButton") then
                        g.TextTransparency = t
                    end
                    if g.BackgroundTransparency ~= nil then
                        g.BackgroundTransparency = math.clamp((g.BackgroundTransparency or 0) + (t*0.85), 0, 1)
                    end
                end
            end
            RunService.RenderStepped:Wait()
        end
        UFO_HUB_STATE.closing = false
        -- р╕Лр╣Ир╕нр╕Щр╕Чр╕▒р╣Йр╕Зр╕лр╕Щр╣Йр╕▓р╕Хр╣Ир╕▓р╕Зр╕лр╕ер╕▒р╕З fade
        if UFO_HUB_STATE.root then
            UFO_HUB_STATE.root.Enabled = false
        end
    end)
end

-- ====== р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕Чр╣Зр╕Ър╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (р╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в) тАФ р╣Гр╕Кр╣Й Window р╕Вр╕нр╕Зр╕Др╕╕р╕У ======
local function buildTabs(UI)
    -- р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б
    local TabMain   = UI:NewTab("р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б")
    local SecMain   = TabMain:NewSection("ЁЯС╜ р╣Бр╕Ьр╕Зр╕Др╕зр╕Ър╕Др╕╕р╕бр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ")
    SecMain:NewToggle("р╣Вр╕лр╕бр╕Фр╕вр╕▓р╕Щ UFO", "р╣Ар╕Ыр╕┤р╕Ф/р╕Ыр╕┤р╕Ф р╕гр╕░р╕Ър╕Ър╕лр╕ер╕▒р╕Б", function(on)
        print(on and "[UFO] р╣Ар╕Ыр╕┤р╕Ф" or "[UFO] р╕Ыр╕┤р╕Ф")
    end)
    SecMain:NewButton("р╕Юр╕ер╕▒р╕Зр╕Ър╕╣р╕кр╕Хр╣М", "р╕Ър╕╣р╕кр╕Хр╣Мр╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щр╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕з", function()
        print("[UFO] Boost!")
    end)
    SecMain:NewSlider("р╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щр╕вр╕▓р╕Щ", "р╕Ыр╕гр╕▒р╕Ър╕гр╕░р╕Фр╕▒р╕Ър╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щ", 100, 0, function(v)
        print("[UFO] Energy:", v)
    end)

    -- р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ
    local TabPlayer = UI:NewTab("р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ")
    local SecPlayer = TabPlayer:NewSection("ЁЯзм р╕Ыр╕гр╕▒р╕Ър╕Др╣Ир╕▓р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ")
    SecPlayer:NewSlider("р╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕зр╣Ар╕Фр╕┤р╕Щ", "WalkSpeed", 100, 16, function(v)
        pcall(function() game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = v end)
    end)
    SecPlayer:NewSlider("р╣Бр╕гр╕Зр╕Бр╕гр╕░р╣Вр╕Фр╕Ф", "JumpPower", 150, 50, function(v)
        pcall(function() game.Players.LocalPlayer.Character.Humanoid.JumpPower = v end)
    end)
    SecPlayer:NewToggle("р╕Чр╕░р╕ер╕╕р╕зр╕▒р╕Хр╕Цр╕╕ (NoClip)", "р╣Гр╕Кр╣Йр╕нр╕вр╣Ир╕▓р╕Зр╕гр╕░р╕зр╕▒р╕З", function(state)
        local lp = game.Players.LocalPlayer
        if not lp.Character then return end
        getgenv()._UFO_NOCLIP = state
        if state and not getgenv()._UFO_NC_CONN then
            getgenv()._UFO_NC_CONN = game:GetService("RunService").Stepped:Connect(function()
                pcall(function()
                    for _,p in ipairs(lp.Character:GetDescendants()) do
                        if p:IsA("BasePart") then p.CanCollide = false end
                    end
                end)
            end)
        elseif not state and getgenv()._UFO_NC_CONN then
            getgenv()._UFO_NC_CONN:Disconnect(); getgenv()._UFO_NC_CONN=nil
            pcall(function()
                for _,p in ipairs(lp.Character:GetDescendants()) do
                    if p:IsA("BasePart") then p.CanCollide = true end
                end
            end)
        end
    end)

    -- р╕ар╕▓р╕Ю/р╣Бр╕кр╕З
    local TabVisual = UI:NewTab("р╕ар╕▓р╕Ю/р╣Бр╕кр╕З")
    local SecVisual = TabVisual:NewSection("ЁЯММ р╣Ар╕нр╕Яр╣Ар╕Яр╕Бр╕Хр╣Мр╕ар╕▓р╕Ю")
    SecVisual:NewToggle("р╕бр╕нр╕Зр╕Бр╕ер╕▓р╕Зр╕Др╕╖р╕Щ", "Night Vision", function(on)
        local l = game.Lighting
        if on then
            getgenv()._UFO_LIGHT = {Brightness=l.Brightness, ClockTime=l.ClockTime}
            l.Brightness=3; l.ClockTime=0
        else
            if getgenv()._UFO_LIGHT then
                l.Brightness=getgenv()._UFO_LIGHT.Brightness
                l.ClockTime =getgenv()._UFO_LIGHT.ClockTime
            end
        end
    end)
    SecVisual:NewButton("р╕Юр╕▒р╕ер╕кр╣Мр╕кр╣Бр╕Бр╕Щ", "р╕вр╕┤р╕Зр╣Ар╕нр╕Яр╣Ар╕Яр╕Бр╕Хр╣М", function()
        print("[UFO] Scan Pulse!")
    end)

    -- р╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х
    local TabTP  = UI:NewTab("р╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х")
    local SecTP  = TabTP:NewSection("ЁЯЫ░я╕П р╕Ир╕╕р╕Фр╣Ар╕Чр╣Ар╕ер╕Юр╕нр╕гр╣Мр╕Х")
    local points = {
        ["р╣Ар╕Бр╕┤р╕Фр╣Гр╕лр╕бр╣И (Spawn)"] = CFrame.new(0,10,0),
        ["р╕Ир╕╕р╕Ф Alpha"]        = CFrame.new(100,25,-50),
        ["р╕Ир╕╕р╕Ф Beta"]         = CFrame.new(-120,30,140),
    }
    for name,cf in pairs(points) do
        SecTP:NewButton(name, "р╣Др╕Ыр╕вр╕▒р╕З: "..name, function()
            local lp = game.Players.LocalPlayer
            if lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
                lp.Character.HumanoidRootPart.CFrame = cf
            end
        end)
    end

    -- р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓
    local TabSet = UI:NewTab("р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓")
    local SecSet = TabSet:NewSection("тЪЩя╕П UI")
    SecSet:NewKeybind("р╕Лр╣Ир╕нр╕Щ/р╣Бр╕кр╕Фр╕З р╣Ар╕бр╕Щр╕╣ (р╕Др╕╡р╕вр╣Мр╕ер╕▒р╕Ф)", "р╕Юр╕▒р╕Б UI р╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕з", Enum.KeyCode.RightControl, function()
        local root = UFO_HUB_STATE.root or findRoot()
        if root then
            if root.Enabled then
                if UFO_HUB_STATE.mainFrame then tweenHide(UFO_HUB_STATE.mainFrame) else root.Enabled=false end
            else
                root.Enabled = true
                task.wait() -- р╣Гр╕лр╣Йр╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕зр╕▓р╕Фр╕Бр╣Ир╕нр╕Щ р╣Бр╕ер╣Йр╕зр╕Др╣Ир╕нр╕в tween
                UFO_HUB_STATE.root  = findRoot()
                UFO_HUB_STATE.mainFrame = findMainFrame(UFO_HUB_STATE.root)
                if UFO_HUB_STATE.mainFrame then tweenShow(UFO_HUB_STATE.mainFrame) end
            end
        end
    end)

    -- р╣Ар╕Др╕гр╕Фр╕┤р╕Х
    local TabCred = UI:NewTab("р╣Ар╕Др╕гр╕Фр╕┤р╕Х")
    local SecCred = TabCred:NewSection("ЁЯЫ╕ р╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Бр╕▒р╕Ъ")
    SecCred:NewLabel("UFO HUB X тАФ Alien Edition (р╣Др╕Чр╕в)")
    SecCred:NewLabel("р╕Шр╕╡р╕б: р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ тАв р╣Ар╕Чр╕▓р╣Вр╕бр╣Ар╕Фр╕┤р╕гр╣Мр╕Щ тАв р╕нр╣Ир╕▓р╕Щр╕Зр╣Ир╕▓р╕в")
    SecCred:NewLabel("р╕Ьр╕╣р╣Йр╕кр╕гр╣Йр╕▓р╕З: р╣Бр╕бр╣Зр╕Б")
end

-- тЬЕ р╣Гр╕Кр╣Й Window р╕Вр╕нр╕Зр╕Др╕╕р╕У р╣Др╕бр╣Ир╕кр╕гр╣Йр╕▓р╕З UI р╕кр╕нр╕Зр╕нр╕▒р╕Щ
buildTabs(Window)

-- ====== р╕кр╣Др╕Хр╕ер╣М: р╕Хр╕▒р╕зр╕нр╕▒р╕Бр╕йр╕гр╣Ар╕Вр╕╡р╕вр╕з/р╕Ир╕▒р╕Фр╕Бр╕ер╕▓р╕З/р╣Бр╕Чр╕Щр╣Бр╕Фр╕Зр╣Ар╕Ыр╣Зр╕Щр╣Ар╕Чр╕▓ ======
local function restyleAlien(root)
    if not root then return end
    for _,o in ipairs(root:GetDescendants()) do
        -- р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б: р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ + р╕Вр╕нр╕Ър╕Фр╕│ + р╕Ир╕▒р╕Фр╕Бр╕╢р╣Ир╕Зр╕Бр╕ер╕▓р╕З
        if o:IsA("TextLabel") or o:IsA("TextButton") then
            pcall(function()
                o.TextColor3 = ALIEN_GREEN
                o.TextStrokeColor3 = BLACK
                o.TextStrokeTransparency = 0.2
                o.TextXAlignment = Enum.TextXAlignment.Center
                o.TextYAlignment = Enum.TextYAlignment.Center
            end)
        end
        -- р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Фр╕ЗтЖТр╣Ар╕Чр╕▓ (р╕Чр╕▒р╣Йр╕З BG/Image)
        if o:IsA("Frame") or o:IsA("TextButton") or o:IsA("ScrollingFrame") then
            pcall(function()
                local c = o.BackgroundColor3
                if c and c.R > 0.5 and c.G < 0.4 and c.B < 0.4 then
                    o.BackgroundColor3 = GRAY_ACCENT
                end
            end)
        elseif o:IsA("ImageLabel") or o:IsA("ImageButton") then
            pcall(function()
                local c = o.ImageColor3
                if c and c.R > 0.5 and c.G < 0.4 and c.B < 0.4 then
                    o.ImageColor3 = GRAY_ACCENT
                end
            end)
        end
    end
end

-- ====== р╣Бр╕Чр╕Щр╕Чр╕╡р╣Ир╕Ыр╕╕р╣Ир╕б X р╣Ар╕Фр╕┤р╕б тЖТ р╕кр╕гр╣Йр╕▓р╕З X р╣Гр╕лр╕бр╣И (р╕Лр╣Йр╕▓р╕вр╕бр╕╖р╕н) р╕Чр╕╡р╣И тАЬр╕Лр╣Ир╕нр╕ЩтАЭ UI ======
local function replaceCloseButton()
    local root = UFO_HUB_STATE.root or findRoot()
    if not root then return end

    local main = UFO_HUB_STATE.mainFrame or findMainFrame(root)
    UFO_HUB_STATE.mainFrame = main

    -- р╕лр╕▓ TopBar р╕Цр╣Йр╕▓р╕бр╕╡
    local top = UFO_HUB_STATE.topBar or findTopBar(main)
    UFO_HUB_STATE.topBar = top or main  -- р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╣Ар╕Ир╕н р╣Гр╕Кр╣Й main р╣Бр╕Чр╕Щ

    -- р╕Лр╣Ир╕нр╕Щ/р╕ер╕Ър╕Ыр╕╕р╣Ир╕б X р╣Ар╕Фр╕┤р╕б р╣Ар╕Юр╕╖р╣Ир╕нр╕Бр╕▒р╕Щ Destroy
    for _,d in ipairs(root:GetDescendants()) do
        if d:IsA("TextButton") and (d.Text=="X" or d.Name:lower():find("close")) then
            pcall(function() d.Visible = false end)
        end
        if d:IsA("ImageButton") and (d.Name:lower():find("close") or d.Image:lower():find("close")) then
            pcall(function() d.Visible = false end)
        end
    end

    -- р╕Цр╣Йр╕▓р╕бр╕╡р╕Ыр╕╕р╣Ир╕бр╣Ар╕гр╕▓р╣Бр╕ер╣Йр╕з р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Лр╣Йр╕│
    if UFO_HUB_STATE.closeButton and UFO_HUB_STATE.closeButton.Parent then return end

    -- р╕кр╕гр╣Йр╕▓р╕Зр╕Ыр╕╕р╣Ир╕б X р╣Гр╕лр╕бр╣И (р╕Эр╕▒р╣Ир╕Зр╕Лр╣Йр╕▓р╕в) тАФ р╕Цр╣Йр╕▓р╕нр╕вр╕▓р╕Бр╕вр╣Йр╕▓р╕вр╕Бр╕ер╕▒р╕Ър╕Вр╕зр╕▓ р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ Anchor/Position р╕Фр╣Йр╕▓р╕Щр╕ер╣Ир╕▓р╕З
    local xBtn = Instance.new("TextButton")
    xBtn.Name = "UFO_CloseButton"
    xBtn.Size = UDim2.new(0, 28, 0, 28)
    xBtn.AnchorPoint = Vector2.new(0, 0.5)             -- ЁЯСЙ р╕Лр╣Йр╕▓р╕вр╕бр╕╖р╕н
    xBtn.Position    = UDim2.new(0, 8, 0.5, 0)         -- ЁЯСЙ р╕Лр╣Йр╕▓р╕вр╕бр╕╖р╕н
    -- р╕Цр╣Йр╕▓р╕нр╕вр╕▓р╕Бр╕Вр╕зр╕▓р╕бр╕╖р╕н р╣Гр╕лр╣Йр╣Гр╕Кр╣Й:
    -- xBtn.AnchorPoint = Vector2.new(1,0.5)
    -- xBtn.Position    = UDim2.new(1,-8,0.5,0)

    xBtn.Text = "X"
    xBtn.Font = Enum.Font.GothamBold
    xBtn.TextSize = 16
    xBtn.TextColor3 = ALIEN_GREEN
    xBtn.BackgroundColor3 = DARK_ELEM
    xBtn.AutoButtonColor = true
    xBtn.BorderSizePixel = 0
    xBtn.ZIndex = (UFO_HUB_STATE.topBar and UFO_HUB_STATE.topBar.ZIndex or 1) + 1

    local corner = Instance.new("UICorner", xBtn); corner.CornerRadius = UDim.new(0,6)
    local stroke = Instance.new("UIStroke", xBtn); stroke.Thickness = 1.5; stroke.Color = GRAY_ACCENT

    xBtn.Parent = UFO_HUB_STATE.topBar

    xBtn.MouseButton1Click:Connect(function()
        local rootNow = UFO_HUB_STATE.root or findRoot()
        if rootNow and UFO_HUB_STATE.mainFrame then
            tweenHide(UFO_HUB_STATE.mainFrame) -- hide р╣Бр╕Ър╕Ър╕ер╕╖р╣Ир╕Щ р╣Бр╕ер╣Йр╕зр╕Др╣Ир╕нр╕в root.Enabled=false
        elseif rootNow then
            rootNow.Enabled = false
        end
    end)

    UFO_HUB_STATE.closeButton = xBtn
end

-- ====== р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в тАЬр╣Ар╕бр╕Щр╕╣тАЭ (р╣Гр╕лр╕Нр╣И/р╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ/р╕ер╕▓р╕Бр╕ер╕╖р╣Ир╕Щ) ======
local function ensureToggleButton()
    if UFO_HUB_STATE.toggleBtn and UFO_HUB_STATE.toggleBtn.Parent then return end

    local sg = Instance.new("ScreenGui")
    sg.Name = "UFO_ToggleButton_GUI"
    sg.ResetOnSpawn = false
    sg.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    sg.Parent = CoreGui

    local btn = Instance.new("TextButton")
    btn.Name = "UFO_MenuToggle"
    btn.Size = UDim2.new(0, 90, 0, 90)
    btn.Position = UDim2.new(0, 20, 0.5, -45)
    btn.Text = "р╣Ар╕бр╕Щр╕╣"
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 18
    btn.TextColor3 = ALIEN_GREEN
    btn.BackgroundColor3 = DARK_ELEM
    btn.AutoButtonColor = true
    btn.BorderSizePixel = 0
    btn.Parent = sg

    local corner = Instance.new("UICorner", btn); corner.CornerRadius = UDim.new(0, 14)
    local stroke = Instance.new("UIStroke", btn); stroke.Thickness = 2; stroke.Color = GRAY_ACCENT

    -- р╕ер╕▓р╕Бр╣Бр╕Ър╕Ъ Tween р╣Гр╕лр╣Йр╕ер╕╖р╣Ир╕Щ
    local dragging, dragStart, startPos = false, nil, nil
    btn.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then
            dragging=true; dragStart=i.Position; startPos=btn.Position
        end
    end)
    btn.InputEnded:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then
            dragging=false
        end
    end)
    UIS.InputChanged:Connect(function(i)
        if dragging and (i.UserInputType==Enum.UserInputType.MouseMovement or i.UserInputType==Enum.UserInputType.Touch) then
            local delta = i.Position - dragStart
            local newPos = UDim2.new(startPos.X.Scale, startPos.X.Offset+delta.X, startPos.Y.Scale, startPos.Y.Offset+delta.Y)
            TweenService:Create(btn, TweenInfo.new(0.10, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position=newPos}):Play()
        end
    end)

    -- Toggle UI р╕лр╕ер╕▒р╕Б (р╕кр╕гр╣Йр╕▓р╕Зр╕Бр╕ер╕▒р╕Ър╕Цр╣Йр╕▓р╕лр╕▓р╕в)
    btn.MouseButton1Click:Connect(function()
        local root = UFO_HUB_STATE.root or findRoot()
        if root and root.Parent then
            -- р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з тЖТ toggle + tween
            if root.Enabled then
                if UFO_HUB_STATE.mainFrame then tweenHide(UFO_HUB_STATE.mainFrame) else root.Enabled = false end
            else
                root.Enabled = true
                task.wait()
                -- р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╣Йр╕зр╣Бр╕кр╕Фр╕Зр╣Бр╕Ър╕Ър╕ер╕╖р╣Ир╕Щ
                UFO_HUB_STATE.root      = findRoot()
                UFO_HUB_STATE.mainFrame = findMainFrame(UFO_HUB_STATE.root)
                UFO_HUB_STATE.topBar    = findTopBar(UFO_HUB_STATE.mainFrame) or UFO_HUB_STATE.mainFrame
                replaceCloseButton()
                if UFO_HUB_STATE.mainFrame then tweenShow(UFO_HUB_STATE.mainFrame) end
            end
        else
            -- р╕лр╕▓р╕вр╕Ир╕гр╕┤р╕З р╣Ж тЖТ р╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╕бр╣Ир╕Ир╕▓р╕Б Library р╣Ар╕Фр╕┤р╕б (р╣Др╕бр╣Ир╕кр╕гр╣Йр╕▓р╕Зр╕кр╕нр╕Зр╕нр╕▒р╕Щ р╣Ар╕Юр╕гр╕▓р╕░р╕нр╕▒р╕Щр╣Ар╕Бр╣Ир╕▓р╕Цр╕╣р╕Бр╕ер╕Ър╣Др╕Ыр╣Бр╕ер╣Йр╕з)
            if not UFO_HUB_STATE.spawnLock then
                UFO_HUB_STATE.spawnLock = true
                local NewWindow = Library.CreateLib("UFO HUB X", "DarkTheme")
                -- р╣Ар╕Хр╕┤р╕бр╣Бр╕Чр╣Зр╕Ър╣Гр╕лр╕бр╣Ир╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З
                buildTabs(NewWindow)
                task.wait(0.25)
                UFO_HUB_STATE.root      = findRoot()
                UFO_HUB_STATE.mainFrame = findMainFrame(UFO_HUB_STATE.root)
                UFO_HUB_STATE.topBar    = findTopBar(UFO_HUB_STATE.mainFrame) or UFO_HUB_STATE.mainFrame
                restyleAlien(UFO_HUB_STATE.root)
                replaceCloseButton()
                if UFO_HUB_STATE.root then UFO_HUB_STATE.root.Enabled = true end
                if UFO_HUB_STATE.mainFrame then tweenShow(UFO_HUB_STATE.mainFrame) end
                UFO_HUB_STATE.spawnLock = false
            end
        end
    end)

    UFO_HUB_STATE.toggleBtn = btn
end

-- ====== р╕Чр╕│р╣Гр╕лр╣Й UI р╕лр╕ер╕▒р╕Бр╕ер╕▓р╕Бр╣Др╕Фр╣Й (р╕Чр╕▒р╣Йр╕З TopBar р╣Бр╕ер╕░ MainFrame р╕кр╕│р╕гр╕нр╕З) ======
local function hookDragging()
    UFO_HUB_STATE.root      = findRoot()
    UFO_HUB_STATE.mainFrame = findMainFrame(UFO_HUB_STATE.root)
    UFO_HUB_STATE.topBar    = findTopBar(UFO_HUB_STATE.mainFrame) or UFO_HUB_STATE.mainFrame

    if UFO_HUB_STATE.topBar then makeDraggable(UFO_HUB_STATE.topBar) end
    if UFO_HUB_STATE.mainFrame then makeDraggable(UFO_HUB_STATE.mainFrame) end
end

-- ====== р╣Ар╕Эр╣Йр╕▓р╕гр╕░р╕зр╕▒р╕Зр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕З тЖТ Restyle/Replace X р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤ ======
local function watchRoot()
    local root = UFO_HUB_STATE.root or findRoot()
    if not root then return end

    -- р╕Цр╣Йр╕▓р╕бр╕╡ element р╣Гр╕лр╕бр╣И тЖТ restyle + р╕Бр╕▒р╕Щ X р╣Ар╕Фр╕┤р╕б
    root.DescendantAdded:Connect(function(obj)
        task.defer(function()
            if UFO_HUB_STATE.root then restyleAlien(UFO_HUB_STATE.root) end
            replaceCloseButton()
        end)
    end)

    -- р╕Цр╣Йр╕▓р╕Цр╕╣р╕Бр╕ер╕Ър╕Ир╕▓р╕Бр╕Хр╣Йр╕Щр╣Др╕бр╣Й тЖТ toggle р╕Ыр╕╕р╣Ир╕бр╕Ир╕░р╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╕бр╣Ир╣Гр╕лр╣Йр╣Ар╕нр╕Зр╕Хр╕нр╕Щр╕Бр╕Ф
    root.AncestryChanged:Connect(function(_, parent)
        if parent == nil then
            UFO_HUB_STATE.root = nil
            UFO_HUB_STATE.mainFrame = nil
            UFO_HUB_STATE.topBar = nil
        end
    end)
end

-- ====== р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ: р╣Ар╕Бр╣Зр╕Ър╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕З + р╕кр╣Др╕Хр╕ер╣М + р╕Ыр╕╕р╣Ир╕б X р╣Гр╕лр╕бр╣И + р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в + р╕ер╕▓р╕Бр╣Др╕Фр╣Й ======
task.defer(function()
    UFO_HUB_STATE.root      = findRoot()
    UFO_HUB_STATE.mainFrame = findMainFrame(UFO_HUB_STATE.root)
    UFO_HUB_STATE.topBar    = findTopBar(UFO_HUB_STATE.mainFrame) or UFO_HUB_STATE.mainFrame

    if UFO_HUB_STATE.root then
        restyleAlien(UFO_HUB_STATE.root)
        replaceCloseButton()
        hookDragging()
        watchRoot()
    end

    ensureToggleButton()

    -- р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ (р╕Цр╣Йр╕▓ Library р╕гр╕нр╕Зр╕гр╕▒р╕Ъ)
    pcall(function()
        if Library and Library.Notify then
            Library:Notify("UFO HUB X", "р╕кр╣Др╕Хр╕ер╣Мр╣Ар╕нр╣Ар╕ер╕╡р╣Ир╕вр╕Щ тАв р╕Ыр╕╕р╣Ир╕бр╕ер╕нр╕в тАв X=р╕Лр╣Ир╕нр╕Щ тАв UI р╕ер╕▓р╕Бр╣Др╕Фр╣Й", 5)
        end
    end)
end)
